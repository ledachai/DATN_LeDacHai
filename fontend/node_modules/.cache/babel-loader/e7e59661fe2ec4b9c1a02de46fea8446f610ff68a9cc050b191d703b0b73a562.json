{"ast":null,"code":"var _jsxFileName = \"H:\\\\MonHoc\\\\DATN\\\\DATN_LeDacHai\\\\fontend\\\\src\\\\Components\\\\Login.js\";\nimport React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport Index from \".\";\nimport Admin from \"./Admin\";\nimport Swal from \"sweetalert2\";\nimport Home from \"./Home\";\nimport { NavLink } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"isLogin\": false,\n      \"Name\": \"Watch\"\n    };\n  }\n  validateLogin(Peo_Email, Peo_Password) {\n    let isValid = true;\n    // Thêm validate username\n    let errorOfPeoEmail = \"\";\n    if (Peo_Email === \"\") {\n      errorOfPeoEmail = errorOfPeoEmail + \"Email không được bỏ trống!\\n\";\n    }\n    // Thêm validate password\n    let errorOfPassword = \"\";\n    if (Peo_Password === \"\") {\n      errorOfPassword = errorOfPassword + \"Mật khẩu không được bỏ trống!\\n\";\n    }\n    // Thêm hiện các dòng validate\n    if (errorOfPeoEmail || errorOfPassword) {\n      Swal.fire('Cảnh báo\\n\\n Dữ liệu không hợp lệ', '', 'error');\n      document.getElementById(\"errorOfPeoEmail\").innerHTML = typeof errorOfPeoEmail === \"undefined\" ? \"\" : errorOfPeoEmail;\n      document.getElementById(\"errorOfPassword\").innerHTML = typeof errorOfPassword === \"undefined\" ? \"\" : errorOfPassword;\n      isValid = false;\n    }\n    return isValid;\n  }\n  handleLogin(Peo_Email, Peo_Password) {\n    if (this.validateLogin(Peo_Email, Peo_Password)) {\n      var acc = {\n        peo_Email: Peo_Email,\n        peo_Password: Peo_Password\n      };\n      axios.post(\"https://localhost:5001/api/V1/People/login\", acc, {\n        \"Content-Type\": \"json\"\n      }).then(response => {\n        localStorage.setItem(\"Token\", response.data.token);\n        localStorage.setItem(\"Role\", response.data.per_Name);\n        localStorage.setItem(\"FullName\", response.data.peo_Fullname);\n        localStorage.setItem(\"Email\", response.data.peo_Email);\n        this.setState({\n          isLogin: true,\n          Name: response.data.peo_Fullname\n        });\n      }).catch(err => {\n        Swal.fire('', 'Sai tên đăng nhập hoặc Mật khẩu!', 'error');\n      });\n    }\n  }\n  render() {\n    const errorLabel = {\n      color: \"red\",\n      padding: \"10px\"\n    };\n    if (this.state.isLogin) {\n      if (localStorage.getItem(\"Role\") === \"Nhân viên\") {\n        return /*#__PURE__*/_jsxDEV(Index, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this);\n      } else if (localStorage.getItem(\"Role\") === \"Khách hàng\") {\n        return /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Admin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this);\n      }\n    } else {\n      // return(\n      //     <div className=\"container\">\n      //         <section className=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\n      //         <div className=\"container\">\n      //             <div className=\"row justify-content-center\">\n      //             <div className=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\n      //                 <div className=\"d-flex justify-content-center py-4\">\n      //                 <a href=\"index.html\" className=\"logo d-flex align-items-center w-auto\">\n      //                     <img src=\"assets/img/logo.png\" alt=\"\" />\n      //                     <span className=\"d-none d-lg-block\">Watch Store</span>\n      //                 </a>\n      //                 </div>{/* End Logo */}\n      //                 <div className=\"card mb-3\">\n      //                 <div className=\"card-body\">\n      //                     <div className=\"pt-4 pb-2\">\n      //                     <h5 className=\"card-title text-center pb-0 fs-4\">Login to Your Account</h5>\n      //                     <p className=\"text-center small\">Enter your email &amp; password to login</p>\n      //                     </div>\n      //                     {/* form */}\n      //                     <form className=\"row g-3 needs-validation\" noValidate>\n      //                     <div className=\"col-12\">\n      //                         <label htmlFor=\"Peo_Email\" className=\"form-label\">Email</label>\n      //                         {/* <span className=\"input-group-text\" id=\"inputGroupPrepend\">@</span> */}\n      //                         <input type=\"email\" name=\"Peo_Email\" className=\"form-control\" id=\"Peo_Email\" \n      //                         onChange={(e) => $(e.target).removeClass(\"active\")}/>\n      //                         {/* Thêm validate tên đăng nhập */}\n      //                         <label style={errorLabel} id=\"errorOfPeoEmail\"></label>\n      //                     </div>\n      //                     <div className=\"col-12\">\n      //                         <label htmlFor=\"Peo_Password\" className=\"form-label\">Password</label>\n      //                         <input type=\"password\" name=\"Peo_Password\" className=\"form-control\" id=\"Peo_Password\" \n      //                         onChange={(e) => $(e.target).removeClass(\"active\")} />\n      //                         {/* Thêm validate Mật khẩu */}\n      //                         <label style={errorLabel} id=\"errorOfPassword\"></label>\n      //                     </div>\n      //                     <div className=\"col-12\">\n      //                         <button className=\"btn btn-primary w-100\" type=\"button\" onClick={() => this.handleLogin($(\"#Peo_Email\").val(), $(\"#Peo_Password\").val())}>Login</button>\n      //                         <button className=\"btn w-100\" type=\"button\">Register</button>\n      //                     </div>\n      //                     </form>\n      //                 </div>\n      //                 </div>\n      //             </div>\n      //             </div>\n      //         </div>\n      //         </section>\n      //     </div>\n      // );\n    }\n  }\n}\nexport default Login;","map":{"version":3,"names":["React","Component","$","axios","Index","Admin","Swal","Home","NavLink","Login","constructor","props","state","validateLogin","Peo_Email","Peo_Password","isValid","errorOfPeoEmail","errorOfPassword","fire","document","getElementById","innerHTML","handleLogin","acc","peo_Email","peo_Password","post","then","response","localStorage","setItem","data","token","per_Name","peo_Fullname","setState","isLogin","Name","catch","err","render","errorLabel","color","padding","getItem"],"sources":["H:/MonHoc/DATN/DATN_LeDacHai/fontend/src/Components/Login.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport Index from \".\";\nimport Admin from \"./Admin\";\nimport Swal from \"sweetalert2\";\nimport Home from \"./Home\";\nimport { NavLink } from \"react-router-dom\";\n\nclass Login extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            \"isLogin\": false,\n            \"Name\": \"Watch\"\n        }\n    }\n    validateLogin(Peo_Email, Peo_Password){\n        let isValid = true;\n        // Thêm validate username\n        let errorOfPeoEmail = \"\";\n        if (Peo_Email === \"\") {\n            errorOfPeoEmail = errorOfPeoEmail + \"Email không được bỏ trống!\\n\";\n        }\n        // Thêm validate password\n        let errorOfPassword = \"\";\n        if (Peo_Password === \"\") {\n            errorOfPassword = errorOfPassword + \"Mật khẩu không được bỏ trống!\\n\";\n        }\n        // Thêm hiện các dòng validate\n        if (errorOfPeoEmail || errorOfPassword) {\n            Swal.fire(\n                'Cảnh báo\\n\\n Dữ liệu không hợp lệ',\n                '',\n                'error'\n            )\n            document.getElementById(\"errorOfPeoEmail\").innerHTML = typeof errorOfPeoEmail === \"undefined\" ? \"\" : errorOfPeoEmail;\n            document.getElementById(\"errorOfPassword\").innerHTML = typeof errorOfPassword === \"undefined\" ? \"\" : errorOfPassword;\n            isValid = false;\n        }\n        return isValid;\n    }\n    handleLogin(Peo_Email, Peo_Password){\n        if(this.validateLogin(Peo_Email, Peo_Password)){\n            var acc = {peo_Email: Peo_Email, peo_Password: Peo_Password}\n            axios.post(\"https://localhost:5001/api/V1/People/login\", acc, { \"Content-Type\": \"json\" })\n            .then((response) => {\n                localStorage.setItem(\"Token\", response.data.token);\n                localStorage.setItem(\"Role\", response.data.per_Name);\n                localStorage.setItem(\"FullName\", response.data.peo_Fullname);\n                localStorage.setItem(\"Email\", response.data.peo_Email);\n                this.setState({\n                    isLogin: true,\n                    Name: response.data.peo_Fullname\n                })\n            })\n            .catch((err) => {\n                Swal.fire(\n                    '',\n                    'Sai tên đăng nhập hoặc Mật khẩu!',\n                    'error'\n                )\n            });\n        }\n    }\n    \n    render(){\n        const errorLabel = {\n            color: \"red\",\n            padding: \"10px\",\n        }\n        if(this.state.isLogin){\n            if(localStorage.getItem(\"Role\") === \"Nhân viên\"){\n                return(\n                    <Index/>\n                );\n            }\n            else if(localStorage.getItem(\"Role\") === \"Khách hàng\"){\n                return(\n                    <Home/>\n                );\n            }\n            else{\n                return(\n                    <Admin/>\n                );\n            }\n        }\n        else{\n            // return(\n            //     <div className=\"container\">\n            //         <section className=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\n            //         <div className=\"container\">\n            //             <div className=\"row justify-content-center\">\n            //             <div className=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\n            //                 <div className=\"d-flex justify-content-center py-4\">\n            //                 <a href=\"index.html\" className=\"logo d-flex align-items-center w-auto\">\n            //                     <img src=\"assets/img/logo.png\" alt=\"\" />\n            //                     <span className=\"d-none d-lg-block\">Watch Store</span>\n            //                 </a>\n            //                 </div>{/* End Logo */}\n            //                 <div className=\"card mb-3\">\n            //                 <div className=\"card-body\">\n            //                     <div className=\"pt-4 pb-2\">\n            //                     <h5 className=\"card-title text-center pb-0 fs-4\">Login to Your Account</h5>\n            //                     <p className=\"text-center small\">Enter your email &amp; password to login</p>\n            //                     </div>\n            //                     {/* form */}\n            //                     <form className=\"row g-3 needs-validation\" noValidate>\n            //                     <div className=\"col-12\">\n            //                         <label htmlFor=\"Peo_Email\" className=\"form-label\">Email</label>\n            //                         {/* <span className=\"input-group-text\" id=\"inputGroupPrepend\">@</span> */}\n            //                         <input type=\"email\" name=\"Peo_Email\" className=\"form-control\" id=\"Peo_Email\" \n            //                         onChange={(e) => $(e.target).removeClass(\"active\")}/>\n            //                         {/* Thêm validate tên đăng nhập */}\n            //                         <label style={errorLabel} id=\"errorOfPeoEmail\"></label>\n            //                     </div>\n            //                     <div className=\"col-12\">\n            //                         <label htmlFor=\"Peo_Password\" className=\"form-label\">Password</label>\n            //                         <input type=\"password\" name=\"Peo_Password\" className=\"form-control\" id=\"Peo_Password\" \n            //                         onChange={(e) => $(e.target).removeClass(\"active\")} />\n            //                         {/* Thêm validate Mật khẩu */}\n            //                         <label style={errorLabel} id=\"errorOfPassword\"></label>\n            //                     </div>\n            //                     <div className=\"col-12\">\n            //                         <button className=\"btn btn-primary w-100\" type=\"button\" onClick={() => this.handleLogin($(\"#Peo_Email\").val(), $(\"#Peo_Password\").val())}>Login</button>\n            //                         <button className=\"btn w-100\" type=\"button\">Register</button>\n            //                     </div>\n            //                     </form>\n            //                 </div>\n            //                 </div>\n            //             </div>\n            //             </div>\n            //         </div>\n            //         </section>\n            //     </div>\n            // );\n        }\n    }\n}\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}